<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>管理员主页</title>
  <!-- Bootstrap core CSS-->
  <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom fonts for this template-->
  <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <!-- Page level plugin CSS-->
  <link href="../static/vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">
  <!-- Custom styles for this template-->
  <link href="../static/css/sb-admin.css" rel="stylesheet">
</head>

<body class="fixed-nav sticky-footer bg-dark" id="page-top">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <a class="navbar-brand" href="index.html">欢迎您 {{   username  }} 管理员</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav navbar-sidenav" id="exampleAccordion">
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Dashboard">
          <a class="nav-link" href="">
            <i class="fa fa-fw fa-dashboard"></i>
            <span class="nav-link-text">管理主页</span>
          </a>
        </li>

        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Charts">
          <a class="nav-link" href="#charts">
            <i class="fa fa-fw fa-area-chart"></i>
            <span class="nav-link-text">数据中心</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Tables">
          <a class="nav-link" href="#table">
            <i class="fa fa-fw fa-table"></i>
            <span class="nav-link-text">文件管理</span>
          </a>
        </li>
          <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Tables">
          <a class="nav-link" href="#table">
            <i class="fa fa-fw fa-table"></i>
            <span class="nav-link-text">项目管理</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Components">
          <a class="nav-link nav-link-collapse collapsed" data-toggle="collapse" href="#collapseComponents" data-parent="#exampleAccordion">
            <i class="fa fa-fw fa-wrench"></i>
            <span class="nav-link-text">用户管理</span>
          </a>
          <ul class="sidenav-second-level collapse" id="collapseComponents">
            <li>
              <a href="#userinfo">教师</a>
            </li>
            <li>
              <a href="#studentinfo">学生</a>
            </li>
              <li>
              <a href="#adduser">添加用户</a>
            </li>
          </ul>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Link">
          <a class="nav-link" href="http://jwc.ecust.edu.cn/">
            <i class="fa fa-fw fa-link"></i>
            <span class="nav-link-text">教务处信息网</span>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav sidenav-toggler">
        <li class="nav-item">
          <a class="nav-link text-center" id="sidenavToggler">
            <i class="fa fa-fw fa-angle-left"></i>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle mr-lg-2" id="messagesDropdown" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-fw fa-envelope"></i>
            <span class="d-lg-none">Messages
              <span class="badge badge-pill badge-primary">12 New</span>
            </span>
            <span class="indicator text-primary d-none d-lg-block">
              <i class="fa fa-fw fa-circle"></i>
            </span>
          </a>
          <div class="dropdown-menu" aria-labelledby="messagesDropdown">
            <h6 class="dropdown-header">New Messages:</h6>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>David Miller</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">Hey there! This new version of SB Admin is pretty awesome! These messages clip off when they reach the end of the box so they don't overflow over to the sides!</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>Jane Smith</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">I was wondering if you could meet for an appointment at 3:00 instead of 4:00. Thanks!</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>John Doe</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">I've sent the final files over to you for review. When you're able to sign off of them let me know and we can discuss distribution.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item small" href="#">View all messages</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle mr-lg-2" id="alertsDropdown" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-fw fa-bell"></i>
            <span class="d-lg-none">Alerts
              <span class="badge badge-pill badge-warning">6 New</span>
            </span>
            <span class="indicator text-warning d-none d-lg-block">
              <i class="fa fa-fw fa-circle"></i>
            </span>
          </a>
          <div class="dropdown-menu" aria-labelledby="alertsDropdown">
            <h6 class="dropdown-header">New Alerts:</h6>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <span class="text-success">
                <strong>
                  <i class="fa fa-long-arrow-up fa-fw"></i>Status Update</strong>
              </span>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">This is an automated server response message. All systems are online.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <span class="text-danger">
                <strong>
                  <i class="fa fa-long-arrow-down fa-fw"></i>Status Update</strong>
              </span>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">This is an automated server response message. All systems are online.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <span class="text-success">
                <strong>
                  <i class="fa fa-long-arrow-up fa-fw"></i>Status Update</strong>
              </span>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">This is an automated server response message. All systems are online.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item small" href="#">View all alerts</a>
          </div>
        </li>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
          &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <li class="nav-item">
          <a class="nav-link" data-toggle="modal" data-target="#exampleModal">
            <i class="fa fa-fw fa-sign-out"></i>退出登录</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="content-wrapper">
    <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="">消息管理</a>
        </li>
      </ol>
      <!-- Icon Cards-->
      <div class="row">
        <div class="col-xl-6 col-sm-6 mb-6" >
          <div class="card text-white bg-primary o-hidden h-100" >
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-comments" ></i>
              </div>
              <div class="mr-5">公告管理</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" data-toggle="modal" data-target="#myModal1" >
                <span class="float-left">发送公告</span>
                              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
               <div class="modal fade" id="myModal1">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- 模态框头部 -->
      <div class="modal-header">
        <h4 class="modal-title">发送公告</h4>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
      </div>

      <!-- 模态框主体 -->
     <div class="modal-body">
              <label>请输入公告内容：</label>
              <textarea rows="10" cols="60" id ="broadcast" name = "broadcast"></textarea>
          </div>
            {% csrf_token  %}
          <div class="modal-footer">
            <button class="btn btn-primary" type="submit" onclick="submit_broadcast()">发送</button>
            <button class="btn btn-default" type="button" data-dismiss="modal">取消</button>
          </div>

    </div>
  </div>
</div>

        <div class="col-xl-6 col-sm-6 mb-6">
          <div class="card text-white bg-warning o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-list"></i>
              </div>
              <div class="mr-5">消息管理</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" data-toggle="modal" data-target="#myModal2">
              <span class="float-left">发送消息</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
      </div>

    <div class="modal fade" id="myModal2">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- 模态框头部 -->
      <div class="modal-header">
        <h4 class="modal-title">发送消息</h4>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
      </div>

      <!-- 模态框主体 -->
      <div class="modal-body">
              <label>请输入发送给<input type="text" name="teachername1" id ="teachername1" style="border-style:none;width:20%;"/>的内容</label>
              <textarea rows="10" cols="60" id ="reply" name = "reply"></textarea>
          </div>
            {% csrf_token  %}
          <div class="modal-footer">
            <button class="btn btn-primary" type="submit" onclick="submit_message()">发送</button>
            <button class="btn btn-default" type="button" data-dismiss="modal">取消</button>
          </div>

    </div>
  </div>
</div>
    <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10 id ='project'><br><br>
      <!-- Area Chart Example-->
      <div class="card mb-3" id="charts">
        <div class="card-header">
          <i class="fa fa-area-chart"></i> 系统日活跃量</div>
        <div class="card-body">
          <canvas id="myAreaChart" width="100%" height="30"></canvas>
        </div>
        <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
      </div>
      <div class="row">
        <div class="col-lg-8">



          <!-- Example Bar Chart Card-->
          <div class="card mb-3"><!--柱状图-->
            <div class="card-header">
              <i class="fa fa-bar-chart"></i> 问题统计</div>
            <div class="card-body">
              <div class="row">
                <div class="col-sm-8 my-auto">
                  <canvas id="myBarChart" width="100" height="50"></canvas>
                </div>
                <div class="col-sm-4 text-center my-auto">
                  <div class="h4 mb-0 text-primary">342</div>
                  <div class="small text-muted">学生提出问题</div>
                  <hr>
                  <div class="h4 mb-0 text-warning">293</div>
                  <div class="small text-muted">老师回答问题</div>
                  <hr>
                  <div class="h4 mb-0 text-success">635</div>
                  <div class="small text-muted">日问题总量</div>
                </div>
              </div>
            </div>
            <div class="card-footer small text-muted">最后更新在 </div>
          </div>

          <!-- Example Notifications Card-->
          <div class="card mb-3">
            <div class="card-header">
              <i class="fa fa-bell-o"></i> 用户动态</div>
            <div class="list-group list-group-flush small">
              <a class="list-group-item list-group-item-action" href="#">
                <div class="media">
                  <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/45x45" alt="">
                  <div class="media-body">
                    <strong>刘三</strong>向
                    <strong>陈平老师</strong>提出问题.
                    <div class="text-muted smaller">2019/6/26 5:43 PM - 5m ago</div>
                  </div>
                </div>
              </a>
              <a class="list-group-item list-group-item-action" href="#">
                <div class="media">
                  <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/45x45" alt="">
                  <div class="media-body">
                    <strong>朱重八</strong>上传了新文件
                    <div class="text-muted smaller">2019/6/26 4:37 PM - 1hr ago</div>
                  </div>
                </div>
              </a>
              <a class="list-group-item list-group-item-action" href="#">
                <div class="media">
                  <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/45x45" alt="">
                  <div class="media-body">
                    <strong>管理员李二</strong>发送了新公告
                    <strong>有关系统维护的通知</strong>.
                    <div class="text-muted smaller">2019/6/26 4:31 PM - 1hr ago</div>
                  </div>
                </div>
              </a>
              <a class="list-group-item list-group-item-action" href="#">查看更多</a>
            </div>
            <div class="card-footer small text-muted">最后更新在 2019/6/26 22:40</div>
          </div>
        </div>
      </div>
      <!-- Example DataTables Card-->
<HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10 id ='project'><br><br>
    <div class="card card-register md-3 ">
      <div class="card-header" id="adduser">添加账户</div>
      <div class="card-body">
        <form  action="/adduser/"   method="POST">{% csrf_token %}
          <div class="form-group">
            <div class="form-row">
              <div class="col-md-6">
                <label for="exampleInputName">名</label>
                <input class="form-control" id="exampleInputName" name="firstname" type="text" aria-describedby="nameHelp" placeholder="输入名">
              </div>
              <div class="col-md-6">
                <label for="exampleInputLastName">姓</label>
                <input class="form-control" id="exampleInputLastName" name="lastname" type="text" aria-describedby="nameHelp" placeholder="输入姓">
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputEmail1">邮箱地址</label>
            <input class="form-control" id="exampleInputEmail1" name="email" type="email" aria-describedby="emailHelp" placeholder="输入邮箱">
              <label>角色</label><br>
                          {% ifequal  profile.role 1 %}
                              <input type="radio" name="role" value="teacher" checked=true name = "role"/> 学生<br />
                              <input type="radio" name="role" value="student" name = "role"/> 教师<br />
                              {% else %}
                              <input type="radio" name="role" value="teacher" name = "sex"/> 学生<br />
                              <input type="radio" name="role" value="student" checked=true  name = "role"/> 教师<br />
                          {% endifequal %}
          </div>
          <div class="form-group">
            <div class="form-row">
              <div class="col-md-6">
                <label for="exampleInputPassword1">密码</label>
                <input class="form-control" id="exampleInputPassword1" name="password" type="password" placeholder="密码">
              </div>
              <div class="col-md-6">
                <label for="exampleConfirmPassword">确认密码</label>
                <input class="form-control" id="exampleConfirmPassword" name="confirmpassword" type="password" placeholder="确认密码">
              </div>
            </div>
              {%  for m in message %}
                  {% ifequal m 'input_none'%}
                      <p class="input_error" style="color: red;margin-left: 250px;margin-top: 10px; ">输入不能为空 </p>
                  {% endifequal %}
                  {% ifequal m 'confirm_error'%}
                      <p class="input_error" style="color: red;margin-left: 250px;margin-top: 10px; ">两次密码不一致 </p>
                  {% endifequal %}
                  {% ifequal m 'email_exist'%}
                      <p class="input_error" style="color: red;margin-left: 250px;margin-top: 10px; ">邮箱已注册 </p>
                  {% endifequal %}
                  {% ifequal m 'register_successful'%}
                      <p class="input_error" style="color: red;margin-left: 250px;margin-top: 10px; ">添加成功！ </p>
                  {% endifequal %}
              {% endfor %}
          </div>
          <input class="btn btn-primary btn-block" type="submit" placeholder="注册"input>
        </form>
      </div>
    </div>


    <!-- /.container-fluid-->
<HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10 id ='project'><br><br>
      <div class="card mb-3" id ="table">
        <div class="card-header">
          <i class="fa fa-table"></i> 所有文件</div>
        <div class="card-body" style=" z-index:1">
          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
              <thead>
                <tr>

                  <th>文件名称</th>
                  <th>上传人</th>
                  <th>上传时间</th>
                  <th>下载</th>
                  <th>删除</th>
                   <th>文件大小</th>
                  <th>老师是否查阅</th>
                </tr>
              </thead>
              <tbody>
                {%  for student_file in student_files  %}
                <tr>

                  <td>{{ student_file.student_file_name }}</td>
                  <td>{{ student_file.user_name }}</td>
                  <td>{{ student_file.student_upload_time }}</td>
                  <td><a href="{% url 'download_file' email.email student_file.student_file_name  %}">download</a></td>
				   <td><a href="{% url 'delete_file' email.email student_file.student_file_name  %}">delete</a></td>
                    <td>{{ student_file.student_file_size }}bit</td>
                    {% ifequal student_file.student_file_flag 1 %}
                    <td>未查阅</td>
                    {% else %}
                    <td>已查阅</td>
                    {% endifequal %}
                </tr>
              {% endfor %}

              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
      </div>
    </div>


  <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10 id ='project'><br><br>
      <div class="card mb-3">
          <div class="card-header" ><i class="fa fa-fw fa-leanpub"></i> 项目管理</div>
      {% ifequal with_project 'true' %}
          <p>当前无项目</p>
      {% else %}
          <div class="card-body">
              <div id="myTabContent" class="tab-content">

                      <div class="table-responsive">
                          <h4 class="margin-bottom-15">项目列表</h4>
                          <table class="table table-striped table-hover table-bordered">
                              <thead>
                              <tr>
                                  <th>#</th>
                                  <th>项目名</th>
                                  <th>指导老师</th>
                                  <th>指导老师专业</th>
                                  <th>项目经费</th>
                                  <th>项目结束时间</th>
                                  <th>是否选择</th>
                              </tr>
                              </thead>
                              <tbody>
                              {% for project in all_projects %}
                              <tr class="danger">
                                  <td>{{ project.id }}</td>
                                  <td>{{ project.project_name }}</td>
                                  <td>{{ project.teacher }}</td>
                                  <td>{{ project.teachermajor }}</td>
                                  <td>{{ project.project_free }}</td>
                                  <td>{{ project.project_enddate }}</td>
                                  {% ifequal project.project_flag 1 %}
                                  <td><a class="btn btn-link">未被选择</a></td>
                                  {% else %}
                                      <td><a  class="btn btn-link">已被选择</a></td>
                                  {% endifequal %}
                              </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div>
              </div>
          </div>
          <div class="card-footer small text-muted">最后一次更新在 {{ profile.time }}</div>
      {% endifequal %}
      </div>

<HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10 id ='project'><br><br>
      <div class="card mb-3">
          <div class="card-header" id="userinfo"><i class="fa fa-fw fa-leanpub"></i> 用户管理</div>
      {% ifequal with_project 'true' %}
          <p>当前无用户</p>
      {% else %}
          <div class="card-body">
              <ul class="nav nav-tabs">
                  <li class="active"><a href="#studentinfo" data-toggle="tab">学生信息</a></li>&nbsp/&nbsp
                  <li><a href="#teacherinfo" data-toggle="tab">教师信息</a></li>
              </ul><br>
              <div id="myTabContent" class="tab-content">
                 <div class="tab-pane fade" id="studentinfo">
                      <div class="table-responsive">
                          <h4 class="margin-bottom-15">学生列表</h4>
                          <table class="table table-striped table-hover table-bordered">
                              <thead>
                              <tr>
                                  <th>#</th>
                                  <th>学生姓名</th>
                                  <th>性别</th>
                                  <th>学校</th>
                                  <th>专业</th>
                                  <th>班级</th>
                                  <th>项目</th>
                                  <th>重置密码</th>
                              </tr>
                              </thead>
                              <tbody>
                              {% for student in all_students %}
                              <tr class="danger">
                                  <td>{{ student.id }}</td>
                                  <td>{{ student.student_name }}</td>
                                  {% ifequal student.student_sex 1 %}
                                  <td><a >男</a></td>
                                      {% else %}
                                      <td><a>女</a></td>
                                      {% endifequal %}
                                  <td>{{ student.student_school }}</td>
                                  <td>{{ student.student_major }}</td>
                                  <td>{{ student.student_class }}</td>
                                  <td>{{ student.project_name }}</td>
                                  <td><a href="{% url 'resetpassword' student.email %}">reset</a></td>
                              </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div>
                  </div>
                  <div class="tab-pane fade" id="teacherinfo">
                      <div class="table-responsive">
                          <h4 class="margin-bottom-15">教师列表</h4>
                          <table class="table table-striped table-hover table-bordered">
                              <thead>
                              <tr>
                                  <th>#</th>
                                  <th>教师姓名</th>
                                  <th>专业</th>
                                  <th>学校</th>
                                  <th>项目一</th>
                                  <th>项目二</th>
                                  <th>项目三</th>
                                  <th>重置密码</th>
                              </tr>
                              </thead>
                              <tbody>
                              {% for teacher in all_teachers %}
                              <tr class="danger">
                                  <td>{{ teacher.id }}</td>
                                  <td>{{ teacher.teacher_name }}</td>
                                  <td>{{ teacher.teacher_major }}</td>
                                  <td>{{ teacher.teacher_school }}</td>
                                  <td>{{ teacher.project1_name }}</td>
                                  <td>{{ teacher.project2_name }}</td>
                                  <td>{{ teacher.project3_name }}</td>
                                  <td><a href="{% url 'resetpassword' teacher.email %}">reset</a></td>
                              </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div>
                  </div>
              </div>
          </div>
          <div class="card-footer small text-muted">最后一次更新在 {{ profile.time }}</div>
      {% endifequal %}
      </div>
    <!-- /.content-wrapper-->
    <footer class="sticky-footer">
      <div class="container">
        <div class="text-center">
          <small>Copyright &copy; 2019.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></small>
        </div>
      </div>
    </footer>
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fa fa-angle-up"></i>
    </a>
    <!-- Logout Modal-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">是否离开?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">选择 "退出登录" 则退出登录至登录界面.</div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">取消</button>
            <a class="btn btn-primary" href="../logout">退出登录</a>
          </div>
        </div>
      </div>
    </div>



  <script>
          var a = $('a[href]', 'nav');
        a.click(function(){
    var href = $(this).attr('href');
    var o = $(href).offset();
    $(window).scrollTop(o.top, 1000); //增加个动画效果
});</script>
  <script>
      function editInfo(publisherid,messageid,teachername) {
          var teachername_ = teachername
          console.log(publisherid,messageid,teachername_);
          $('#teachername1').val(teachername_);
          $('#message_id').val(messageid);
          $('#message_publisher').val(publisherid);
          $('#submit_reply').modal('show');
      }
      function getCsrf(){
	        return $("input[name='csrfmiddlewaretoken']").val();
      };
      function submit_broadcast() {    //发送公告
          var teacher = $('#question_teacher').val();
          var content = $('#broadcast').val();
          console.log(teacher,content)
          $.ajax({
              type:'post',
              url:'sendbroadcast/',
              datatype:'html',
              contentType: "application/x-www-form-urlencoded; charset=utf-8",
              data : "csrfmiddlewaretoken="+getCsrf()+'&broadcast_content='+content+'&teacherid='+teacher,
              success:function (result) {
                  if (result=='ok'){
                      alert('发送成功！');
                      $('#reply').val('');
                  }
              }
          })
      }
        {#ajax异步请求回复消息#}
      function submit_reply(){
          var reply = $('#reply').val();
          var messageid = $('#message_id').val();
          var messagepublisher = $('#message_publisher').val();
          var projectid = $('#projectid').val();

          $.ajax({
              type:'post',
              url:'reply/',
              datatype:'html',
              contentType: "application/x-www-form-urlencoded; charset=utf-8",
              data : "csrfmiddlewaretoken="+getCsrf()+'&message_content='+reply+'&messageid='+messageid+'&messagepublisher='+ messagepublisher+'&projectid=' + projectid,
              success:function (result) {
                  if (result=='ok'){
                      alert('回复成功');
                      $('#reply').val('');
                  }
                  else if(result=='false') {
                      alert('学生无项目');
                      $('#reply').val('');
                  }
              }
          });

      }
  </script>


    <!-- Bootstrap core JavaScript-->
    <script src="../static/vendor/jquery/jquery.min.js"></script>
    <script src="../static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="../static/vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Page level plugin JavaScript-->
    <script src="../static/vendor/chart.js/Chart.min.js"></script>
    <script src="../static/vendor/datatables/jquery.dataTables.js"></script>
    <script src="../static/vendor/datatables/dataTables.bootstrap4.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="../static/js/sb-admin.min.js"></script>
    <!-- Custom scripts for this page-->
    <script src="../static/js/sb-admin-datatables.min.js"></script>
    <script src="../static/js/sb-admin-charts.min.js"></script>
  </div>
</body>

</html>
